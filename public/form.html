<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Vo Tan Binh from SPACEAPP Team" />
        <meta name="description" content="Package Registration Page">
        <title>SPACEAPP | Package Registration</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="style/formstyle.css">
        <link rel="icon" href="img/webicon.webp">
    </head>
    <body>
        <main>
        <section class="container px-4">
            <h1 class="mb-0 mt-2 Title">SPACEAPP</h1>
            <section class="card h-100 rounded-3 shadow justify-content-center mt-3 p-4 p-md-5 mb-3 mx-auto">
                <section class="card-body">
                    <h4 class="card-title label mb-3">Informations</h4>
                    <section class="form-check">
                        <input class="form-check-input" type="radio" id="Full Membership" name="flexRadioDefault" checked>
                        <label class="form-check-label" for="Full Membership">Full Package</label>
                    </section>
                    <section class="form-check">
                        <input class="form-check-input" type="radio" id="Associate Membership" name="flexRadioDefault">
                        <label class="form-check-label" for="Associate Membership">Associate Package</label>
                    </section>
                    <form class="needs-validation" novalidate action="/register" method="post">
                        <section class="row my-2">
                            <section class="form-group col-md-6">
                                <label class="label my-2" for="inputFirstname">First name</label>
                                <input type="text" class="form-control" id="inputFirstname" autocomplete="off" required>
                                <section class="invalid-feedback">
                                    Please enter your First name.
                                </section>
                            </section>
                            <section class="form-group col-md-6">
                                <label class="label my-2" for="inputLastname">Last name</label>
                                <input type="text" class="form-control" id="inputLastname" autocomplete="off" required>
                                <section class="invalid-feedback">
                                    Please enter your last name.
                                </section>
                            </section>
                        </section>
                        <section class="form-group">
                            <label class="label my-2" for="inputEmail">Email</label>
                            <input type="email" class="form-control" id="inputEmail" name="inputEmail" placeholder="example@gmail.com" autocomplete="off" required>
                            <section class="invalid-feedback">
                                Please enter a valid Email address. We will send you the App Download (your delivery) link to this email.
                            </section>
                        </section>
                        <section class="row my-2">
                            <section class="form-group col-md-6">
                                <label class="label my-2" for="inputAddress">Address</label>
                                <input type="text" class="form-control" id="inputAddress" placeholder="1234 Main St" autocomplete="off" required>
                                <section class="invalid-feedback">
                                    Please Enter your Address.
                                </section>
                            </section>
                            <section class="form-group col-md-6">
                                <label class="label my-2" for="inputCity">City (optional)</label>
                                <input type="text" class="form-control" id="inputCity" autocomplete="off" placeholder="Los Angeles">
                            </section>
                        </section>

                        <section class="row my-2">
                            <section class="form-group col-md-4">
                                <label class="label my-2" for="inputCountry">Country</label>
                                <input type="text" class="form-control" id="inputCountry" placeholder="USA" autocomplete="off" required>
                                <section class="invalid-feedback">
                                    Country name is required.
                                </section>
                            </section>
                            <section class="form-group col-md-4">
                                <label class="label my-2" for="inputState">State (optional)</label>
                                <select id="inputState" class="form-control">
                                    <option selected>Choose...</option>
                                    <option>52 states</option>
                                </select>
                            </section>
                            <section class="form-group col-md-4">
                                <label class="label my-2" for="inputZip">Zip</label>
                                <input type="text" class="form-control" id="inputZip" minlength="5" maxlength="9" autocomplete="off" required>
                                <section class="invalid-feedback">
                                    A vaild Zip code is required.
                                </section>
                            </section>
                        </section>
                        <hr>
                        <h4 class="mt-4 mb-3 label">Payment</h4>
                        <section class="form-check">
                            <input class="form-check-input" type="radio" id="Debit Card" name="flexRadioDefault">
                            <label class="form-check-label" for="Debit Card">Debit Card</label>
                        </section>
                        <section class="form-check">
                            <input class="form-check-input" type="radio" id="Credit Card" name="flexRadioDefault" checked>
                            <label class="form-check-label" for="Credit Card">Credit Card</label>
                        </section>
                        <section class="form-check">
                            <input class="form-check-input" type="radio" id="Paypal" name="flexRadioDefault">
                            <label class="form-check-label" for="Paypal">Paypal</label>
                        </section>
                        <section class="row">
                            <section class="col-md-6">
                                <label class="label my-2" for="cardName">Cardholder Name</label>
                                <input type="text" class="form-control" id="cardName" placeholder="Full name on card" autocomplete="off" required>
                                <section class="invalid-feedback">
                                    Cardholder Name is required.
                                </section>
                            </section>
                            <section class="col-md-6">
                                <label class="label my-2" for="cardNumber">Card Number</label>
                                <input type="text" class="form-control" id="cardNumber" placeholder="1111 2222 3333 4444" minlength="9" maxlength="23" autocomplete="off" required>
                                <section class="invalid-feedback">
                                    A vaild Card Number is required.
                                </section>
                            </section>
                        </section>
                        <section class="row mt-2">
                            <section class="col-md-4">
                                <label class="label my-2" for="expDate">Expiration</label>
                                <input type="text" class="form-control" id="expDate" placeholder="MM/YY" minlength="5" maxlength="5" autocomplete="off" required>
                                <section class="invalid-feedback">
                                    A valid Expiration date is required.
                                </section>
                            </section>
                            <section class="col-md-4">
                                <label class="label my-2" for="cvv">CVV</label>
                                <input type="text" class="form-control" id="cvv" minlength="3" maxlength="4" autocomplete="off" required>
                                <section class="invalid-feedback">
                                    A valid CVV is required.
                                </section>
                            </section>
                        </section>
                        <section class="form-group my-3 ms-3">
                            <section class="form-check">
                                <input class="form-check-input" type="checkbox" id="gridCheck" required>
                                <label class="form-check-label" for="gridCheck">
                                    You agree with our <a href="PrivatePolicy.html" target="_blank" style="text-decoration: none; color:rgb(19, 78, 120)">Terms</a>
                                </label>
                                <section class="invalid-feedback">
                                    You must agree to continue.
                                </section>
                            </section>
                        </section>
                        <section class="row row-cols-3 justify-content-center">
                            <button type="submit" class="btn btn-primary mt-3" style="min-height: 3rem; font-size: larger;">Continue to Checkout</button>
                        </section>
                        <section class="row row-cols-2 justify-content-center mt-5">
                            <a class="text-nowrap login_btn" href="signup.html" target="_blank">Don't have an account yet? Make one now!</a>
                        </section>
                    </form>
                </section>
            </section>
        </section>
        </main>
        <script>
            document.getElementById('cardNumber').addEventListener('input', function (e) {
                let value = e.target.value;

                // Remove all non-digit characters (including spaces)
                value = value.replace(/\D/g, '');

                // Group every 4 digits and join with a space
                let formatted = value.match(/.{1,4}/g)?.join(' ') || '';

                e.target.value = formatted;

                var valid = value.length >= 8 && value.length <= 19;
                e.target.setCustomValidity(valid ? "" : "Invalid, require 4 digits");
            });
        </script>
        <script>
            function validateExpirationdata(value) {
                const cleaned = value.replace(/\D/g, '');
                if (cleaned.length < 2) return false;
                const mm = parseInt(cleaned.slice(0, 2), 10);
                return mm >= 1 && mm <= 12;
            }

            const expInput = document.getElementById('expDate');
            expInput.addEventListener('input', function (e) {
                let el = e.target;
                let value = el.value.replace(/\D/g, '');

                // Format MM/YY
                let formatted = value.match(/.{1,2}/g)?.join('/') || '';
                el.value = formatted;

                // Always move cursor to the end
                setTimeout(() => {
                    el.selectionStart = el.selectionEnd = el.value.length;
                }, 0);

                // Custom validation logic
                const valid = value.length === 4 && validateExpirationdata(formatted);
                el.setCustomValidity(valid ? "" : "Invalid MM/YY format.");
            });

            // Optional: prevent moving cursor with arrow keys or mouse click
            expInput.addEventListener('keydown', function (e) {
                // Allow only backspace or numeric keys
                const allowed = ['Backspace', 'Delete', 'Tab'];
                if (!/^[0-9]$/.test(e.key) && !allowed.includes(e.key)) {
                    e.preventDefault();
                }
            });

            expInput.addEventListener('mousedown', function (e) {
                // Always force cursor to end on mouse click
                setTimeout(() => {
                    expInput.selectionStart = expInput.selectionEnd = expInput.value.length;
                }, 0);
            });
        </script>

        
        <script>
            // Bootstrap validation script
            (function () {
                'use strict'
                const forms = document.querySelectorAll('.needs-validation')
                Array.from(forms).forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                    event.preventDefault()
                    event.stopPropagation()
                    }
                    form.classList.add('was-validated')
                }, false)
                })
            })();
        </script>
    </body>
</html>