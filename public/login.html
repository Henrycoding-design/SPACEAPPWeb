<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Vo Tan Binh from SPACEAPP Team" />
    <meta name="description" content="Log In Page" />
    <title>SPACEAPP | Log In</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="style/formstyle.css">
    <link rel="icon" href="img/APPICONEXTGEN.webp">
    <style>
      /* override any global min-width on cards */
      .auth-card { width:100%; max-width:560px; min-width:auto !important; }
      .form-control, .btn, .form-select { min-height: 3rem; }
    </style>
  </head>
  <body>
    <main>
      <section class="container py-3">
        <section class="row justify-content-center">
          <section class="col-12 col-md-10 col-lg-8 d-flex flex-column align-items-center">
            <h1 class="mb-2 Title text-center w-100">SPACEAPP</h1>

            <section class="card auth-card rounded-3 shadow mt-2 p-3 p-md-4">
              <section class="card-body">
                <section id="error-box" class="alert alert-danger alert-dismissible fade show d-none" role="alert">
                  <span id="error-text"></span>
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </section>

                <form class="needs-validation" novalidate action="/login" method="post">
                  <section class="mb-3">
                    <label class="label my-1" for="loginEmail">Email</label>
                    <input type="email" name="email" class="form-control" id="loginEmail" placeholder="example@gmail.com" autocomplete="email" required>
                    <section class="invalid-feedback">Please enter a valid email</section>
                  </section>

                  <section class="mb-3">
                    <label class="label my-1" for="loginPassword">Password</label>
                    <section class="input-group">
                      <input type="password" name="password" class="form-control" id="loginPassword" minlength="6" maxlength="18" autocomplete="current-password" required>
                      <button type="button" class="btn btn-outline-secondary rounded-end" aria-label="Show password" onclick="togglePassword('loginPassword', this)">
                        <i class="bi bi-eye"></i>
                      </button>
                      <hr>
                      <section class="invalid-feedback">Password must be 6â€“18 characters</section>
                    </section>
                  </section>

                  <section class="form-check my-3">
                    <input class="form-check-input" type="checkbox" id="loginAgree" required>
                    <label class="form-check-label" for="loginAgree">
                      You agree with our <a href="PrivatePolicy.html" class="text-decoration-none" target="policy" onclick="window.open('', 'policy')">Terms</a>
                    </label>
                    <section class="invalid-feedback">This is required</section>
                  </section>

                  <section class="d-grid gap-3">
                    <button type="submit" class="btn btn-primary btn-md">Login</button>
                  </section>
                  
                  <p class="mt-3 text-center">
                    <a class="text-nowrap" style="background: transparent; border: 0px; color:rgb(19, 78, 120); text-decoration: none;" target="_self" href="signup.html">Don't have an account? Create One!</button>
                  </p>
                </form>
              </section>
            </section>

          </section>
        </section>
      </section>
    </main>

    <script>
      // show backend error message if present
      const params = new URLSearchParams(window.location.search);
      if (params.has("error")) {
        const box = document.getElementById("error-box");
        const text = document.getElementById("error-text");
        box.classList.remove("d-none");
        box.classList.add("show");
        text.textContent = params.get("error");
        setTimeout(() => {
          box.classList.remove("show");
          setTimeout(() =>{
            box.classList.add("d-none");
          }, 200);
        }, 5000);
      }

      // bootstrap validation (no stray checkMatch() call here)
      (() => {
        'use strict';
        const forms = document.querySelectorAll('.needs-validation');
        Array.from(forms).forEach((form) => {
          form.addEventListener('submit', (event) => {
            if (!form.checkValidity()) {
              event.preventDefault();
              event.stopPropagation();
            }
            form.classList.add('was-validated');
          }, false);
        });
      })();

      function togglePassword(inputId, btn) {
        const input = document.getElementById(inputId);
        const icon = btn.querySelector('i');
        const isPass = input.type === 'password';
        input.type = isPass ? 'text' : 'password';
        icon.classList.toggle('bi-eye', !isPass);
        icon.classList.toggle('bi-eye-slash', isPass);
        btn.setAttribute('aria-label', isPass ? 'Hide password' : 'Show password');
      }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
  </body>

</html>
